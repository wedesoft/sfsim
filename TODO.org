#+TITLE: TODO
#+AUTHOR: Jan Wedekind
* TODO [#A] spacecraft simulation                                      :physics:
  - Note taken on [2025-11-14 Fr 22:28] \\
    float slider1 = iMouse.x / iResolution.x;
    float slider2 = iMouse.y / iResolution.y;
    float distortion1 = max(0.0, 5.0 * point.y * point.z * (slider1 - 0.5));
    float distortion2 = max(0.0, 5.0 * point.y * (slider2 - 0.5));
    float sdf = mix(baseSdf, shapeMix, mix(engine_pos, 1.0, transition)) + distortion1 + distortion2;
  - Note taken on [2025-08-26 Di 21:59] \\
    - [[https://forum.kerbalspaceprogram.com/topic/188379-is-a-gimballed-aerospike-possible/][thrust vectoring with aerospike]]
  - Note taken on [2025-08-26 Tue 09:21] \\
    - Links by Substantial_Marzipan about linear aerospike:
      - https://aerospaceweb.org/design/aerospike/aerospike.shtml
      - https://en.m.wikipedia.org/wiki/Rocketdyne_XRS-2200
  - Note taken on [2025-08-25 Mo 21:26] \\
    - [[http://mae-nas.eng.usu.edu/MAE_5540_Web/propulsion_systems/section4/section4.2.pdf][section4.2.pdf]]
  - Note taken on [2025-08-24 So 20:58] \\
    - add thrust: 3,010,000 lbf
    - weight: payload 25000 kg. vehicle 100t-135t
    - fuel: LOX 723900 kg, LH2 126000 kg -> 849900 kg
    - max thrust: 13.4 MN
  - Note taken on [2025-08-14 Do 12:19] \\
    - [[https://flightsimcoach.com/msfs-2024-keyboard-commands/][MSFS keycoard commands]]
    - [[https://www.shadertoy.com/view/XsXSWS][gas flame]]
    - [[https://www.shadertoy.com/view/XsVSDW][flame thrower]]
    - [[https://www.shadertoy.com/view/wdjGRz][launching rocket with mach diamonds]]
    - [[https://www.shadertoy.com/view/WdGBDc][mach diamonds with vibration]]
    - [[https://www.shadertoy.com/view/XX3fDH][reentry flame]]
    - [[https://blender.stackexchange.com/questions/290145/how-to-create-vacuum-rocket-engine-plume][blender cone]]
    - volumetric engine exhaust?
    - [[https://www.youtube.com/watch?v=qfI9j92CUso][blender animation]]
    - [[https://blog.kuula.co/virtual-tour-space-shuttle][space shuttle virtual tour]]
    - [[https://www.spaceflighthistories.com/post/x-33-venturestar][X-33 Venturestar]]
    - [[https://github.com/HappyEnte/DreamChaser][Dreamchaser]]
    - [[https://www.youtube.com/watch?v=UuKKeMgAgjU][KSA volumetric exhaust]]
  - [ ] use [[https://learnopengl.com/Advanced-Lighting/Deferred-Shading][deferred rendering]] and depth-aware upsampling,
        also see [[https://bartwronski.com/2021/02/15/bilinear-down-upsampling-pixel-grids-and-that-half-pixel-offset/]]
    - [-] render cloud and plume low res overlay
      - [X] cloud and plume rendering with atmospheric attenuation with alpha as transmittance using glBlendFuncSeparate
        - [X] change all integration tests to use new cloud shaders
        - [X] change main program to use new cloud shader
        - [X] delete atmosphere cloud and planet cloud shader
        - [X] switch model clouds to overlay, try out plume graphics
        - [X] remove cloud-plume-cloud-outer
        - [X] implement depth-aware upsampling for model, planet, and atmosphere (use z-far for atmosphere?)
        - [X] render plume box instead of fullscreen
          - [X] limit plume box using max-slope and length
          - [X] use cube as vertex array object with backface pointing outside, test rendering from inside cube
          - [X] problem when object radius is larger than distance to object
          - [X] problem with shadow map size being adapted to object radius
          - [X] use different vertex shader using transform and air pressure to move and scale box
      - [ ] implement RCS thrusters
        - [ ] implement rcs-segment.glsl
        - [ ] use different values for rcs: nozzle, throttle, max-slope
        - [ ] integration test for model and plume
        - [ ] store RCS coordinate systems in Blender
        - [ ] use binary space partitioning tree
    - [ ] disable color buffer when rendering frame buffer and it is not required?
  - [ ] use macros when doing front face culling or disabling depth test
  - [ ] cloud segment with full attenuation and cutoff (take front layer rgba "incoming"?)
  - [ ] copy alpha values for up-to-date cut off, use correct cutoff for all rendered layers when rendering front to back
  - [ ] schemas for model, planet, and atmosphere geometry renderer
  - [ ] remove object_direction, object_point, and camera_to_object from shaders where it is not required any more
  - [ ] Thrust vectoring:
        If they downthrottle the chambers on one side, they can pitch; if they downthrottle on opposite corners, they can roll.
        A combination of pitch and roll can produce whatever attitude control you need. source
        [[https://forum.kerbalspaceprogram.com/topic/188379-is-a-gimballed-aerospike-possible/]]
  - [ ] animate control surfaces and air brake
  - [ ] physics and animation of nose wheel steering (apply difference of two animation time stamps)
  - [ ] post on r/linux_gaming
  - [ ] limit time step to avoid physics problems
  - [ ] yaw stabilisation
  - [ ] kill rotation
  - [ ] display perihel aphel and time to, Check out poliastro and hapsira
  - [ ] block gear up when on the ground
  - [ ] Radar altitude
  - [ ] Elevator trim
  - [ ] nav lights, strobe lights, landing lights, blinking beacon/position lights
  - [ ] moon landing physics (hover thrusters), hover thruster locations
  - [ ] docking physics
  - [ ] reentry flame
* TODO [#B] add launchpad and runway                                   :scenery:
  - Note taken on [2025-08-14 Do 12:58] \\
    [[https://aerosavvy.com/airport-lights][airport lights]], spot lights,
    [[https://samdriver.xyz/article/decal-render-intro][decal render intro]],
    [[https://www.reddit.com/r/opengl/comments/10rwgy7/what_is_currently_the_best_method_to_render_roads/][render roads]]
  - [ ] launchpad
  - [ ] launch complex
  - [ ] lights
  - [ ] get high-res Florida data (hot spot for map)
  - [ ] render building on top of ground
  - [ ] deferred decals for rendering runway, runway lights
  - [ ] try one object casting shadow on another (pack object shadow maps into one?)
* TODO [#B] sound effects                                            :immersion:
  - Note taken on [2025-08-16 Sa 22:05] \\
    [[https://freesound.org/people/Andrewkn/sounds/502864/]]
    [[https://www.epidemicsound.com/sound-effects/]]
  - [ ] beep-beep sound, paraglider audio?
  - [ ] play different game music depending on situation
  - [ ] event-based radio (triggers as in Operation Flashpoint)
* TODO [#C] 3D cockpit                                               :interface:
  - Note taken on [2025-11-19 Mi 19:49] \\
    [[https://uxdesign.cc/how-i-recreated-crew-dragons-ui-15877eddf3ed]]
    [[https://github.com/Neel-Dandiwala/SpaceX-Dragon2-UI?tab=readme-ov-file]]
** TODO cockpit, flight assistance tools, render cockpit and stencil/mask, then render planet, [[https://open.gl/depthstencils][depth stencils]]
** TODO update controls in background thread
** TODO ground slope warning
** TODO frontal and side view of moon lander, altitude visualisation?
** TODO cockpit and scene rendering looking downward so that horizon is in upper half of screen
** TODO EF2000 like cockpit controls (quick access views) ctrl+a,b,c,...? ctrl+arrow?
** TODO EF2000-like zoom into individual MFDs
** TODO [[https://opengc.sourceforge.net/screenshots.html][open glass cockpit]]
** TODO [[https://www.youtube.com/watch?v=XhudXvmnYwU][Kerbal cockpit]]
** TODO [[https://iss-sim.spacex.com/][SpaceX cockpit]]
** TODO checklist MFD
** TODO orbit plane alignment
** TODO docking view
** TODO horizon with height and variometer
** TODO encounter
   - [ ] station
   - [ ] moon/base
   - [ ] earth
** TODO aerobrake/base roll-reversal, speed-height-distance profile
** TODO heading alignment cylinder
** TODO how to switch speed display (Earth surface, Earth orbit), display speed before applying second corrective impulse
** TODO top:
   - [ ] warnings (status display)
   - [ ] autopilot on/off, autothrottle (autopilot speed), angle of attack and bank hold (including reverse), roll reversal button
   - [ ] autopilot kill rotation, prograde, retrograde, orbit normal +/-, radial in/out
   - [ ] rcs mode (off, rotation, translation)
   - [ ] aircraft flight control surfaces: off/pitch/on
** TODO main:
   - [ ] cabin light, panel light
   - [ ] 2 mfds
   - [ ] apu on/off
   - [ ] airlock doors (three state), chamber pressure, bay door (open, close, stop)
   - [ ] light switch: nav, beacon, strobe
   - [ ] engine, thrust (main/hover), rcs
   - [ ] undock
   - [ ] fuel display (main, rcs, apu), oxygen display
   - [ ] hover doors switch + status
   - [ ] gear up/down switch + status
   - [ ] spoilers
   - [ ] radiator deploy + status
   - [ ] coolant temperature
   - [ ] no flaps
** TODO mfds:
   - [ ] yaw, bank, pitch acceleration and velocity indicators
   - [ ] horizon hsi, height, heading, variometer, speed, ils height, nominal speed
   - [ ] vor (use heading)
   - [ ] nav frequencies, dock, vtol freq
   - [ ] dock (angles, offset to path, distance, approach speed, x/y speed)
   - [ ] cameras (greyscale?)
   - [ ] map of earth/moon
   - [ ] hull temperature
   - [ ] align orbit plane
   - [ ] orbit
   - [ ] transfer: encounter, translunar orbit, insertion
   - [ ] ascent profile
   - [ ] reentry profile
   - [ ] no need to adjust MFDs during critical parts of the mission
** TODO engine thrust lever (main, hover)
   - [ ] hover door
** TODO bottom
   - [ ] flightstick (yaw/pitch/roll), trim wheel
   - [ ] fuel lines open/close (lox, main), external pressure online
   - [ ] life support
** TODO autopilot programs: baseland, helicopter, hover/autoland, launch/deorbit, aerocapture/aerobrake, airspeed hold, attitude hold, altitude hold, heading alignment cylinder, VOR/ILS, eject, capture, base sync, station sync, dock
** TODO use separate thread for making Nuklear buffer
* TODO [#C] add moon                                                   :scenery:
  - [ ] moon base, lights
  - [ ] rotating Moon coordinate system, handle ground collisions
  - [ ] how to switch speed display (Moon orbit, Moon surface)
  - [ ] accelerated coordinate system with sun gravitation?
* TODO [#C] add space station                                          :scenery:
** TODO space station model, station lights
** TODO NASA docking system, soft-dock, hard-dock, [[https://www.youtube.com/watch?v=dWYpVfhvsak][docking sytem]]
* TODO [#C] marketing/progressing project                            :marketing:
** TODO contact gamespress
** TODO release demo
** TODO targeted game description:
   - [ ] go four layers deep when describing your kind game: main genre, sub-genre, type of combat, setting / theme
   - [ ] breakdown into five tasks (What player does in your game), what actions the player uses to fulfill this task, be as specific as you can, add GIFs
** TODO steam page
   steam page with trailer 90-180 seconds long (starting with gameplay immediately, end with call to action (wishlist now),
   show UI (make outside cockpit UI?), easy to understand shots with player interaction 3-5 seconds each, show variety in biomes,
   (1920x1080, 5000 kbps, 30 fps, mp4)), capsule art (recognisable professional designed thumbnail),
   first 4 screenshots important - bright ones and dark ones (at least 3 different environments),
   good short description (engaging start, mention core hooks, enumerate basic gameplay verbs, by wedesoft (social proof)),
   add steam page url to long description, add animated GIFs, section banners, main content column images/videos now with 780px width
** TODO missions and high scores
* TODO [#C] graphics improvements                                      :scenery:
** TODO general quality
   - Note taken on [2025-08-14 Do 12:33] \\
     - [[https://learnopengl.com/Advanced-Lighting/Bloom][Bloom]]
     - [[https://learnopengl.com/Guest-Articles/2022/Phys.-Based-Bloom][Bloom]]
     - [[http://blog.chrismdp.com/2015/06/how-to-quickly-add-bloom-to-your-engine/][Bloom]]
   - [ ] HDR bloom (separable convolution), Add blurred overflow
   - [ ] multisampling
   - [ ] adapt shadow map size to object distance
   - [ ] integration test powder function
   - [ ] low FPS at 100km height was reported
   - [ ] cloud shadow flickering at large distance?
** TODO peek faster than last on vectors
** TODO use :let, :while, :when in for loops
** TODO use icosahedron for mapping 2D micro textures (better grass)
   - Note taken on [2025-08-16 Sa 22:05] \\
     [[https://uk.pinterest.com/pin/445223113163715012/]]
     [[https://stackoverflow.com/questions/4699568/opengl-icosahedron-texture-mapping]]
   - [ ] unroll icosahedron manually (20 surfaces)
   - [ ] find smallest cross product of vector with sum of corner vectors
   - [ ] use inverse of corners matrix to get linear combination of corner vectors and normalise sum to one
   - [ ] determine u and v
   - [ ] microtexture for normal map, microtextures, bump maps
   - [ ] multitextures for land detail?
** TODO fix problem with resolution of neighbouring tiles in planetary cubemap
   problem with neighbouring resolution levels being to different (maybe use more than two possibilities for edge tessellation?)
** TODO improve rendering of sun (see s2016-pbs-frostbite-sky-clouds-new.pdf)
** TODO how to render water, waves, [[https://www.shadertoy.com/view/Ms2SD1][waves]]
** TODO increase ambient light (surface radiance)
** TODO arycama: limit darkness of cloud shadow (exponential approaching a base level)
** TODO add earth light
** TODO add moon light
** TODO stars, [[https://www.shadertoy.com/view/ttcSD8][volumetric clouds]]
** TODO uniform random offsets for Worley noises to generate different cloud cover for each game
*** TODO point sprites for stars, atmospheric flicker using sprite arrays
*** TODO Skydome: counter-clockwise front face (GL11/glFrontFace GL11/GL\_CCW) (configuration object)
*** TODO Skydome scaled to ZFAR * 0.5
*** TODO no skydome and just stars as pixels?
** TODO create windows using blending (reflections?)
** TODO introduce variation to cloud height
* TODO [#C] other improvements
  - Note taken on [2025-10-04 Sa 13:42] \\
    Press g? to get orgmode help
  - Note taken on [2025-09-15 Mo 18:52] \\
    https://www.reddit.com/user/bsless/
    Willing to lend a hand with any perf work if you're interested
  - Note taken on [2025-09-15 Mo 12:59] \\
    Polish:
    * settings menu
    * Balanced colour palette
    * Voice over
    * Visual effects
    * bloom https://www.youtube.com/watch?v=ml-5OGZC7vE
  - [ ] winter daytime is too dark, adjust range?
  - [ ] limit timestep on startup to prevent numerical problems
  - [ ] add keyboard mapping help page!
  - [ ] Need to change keyboard bindings for camera because some users don't have a numpad.
  - [ ] configurable key controls
  - [ ] joystick hat to control camera
  - [ ] limit dt or pause
  - [ ] shadows and opacity maps are set up in three places (search :sfsim.opacity/shadows)
  - [ ] add object radius to object?
  - [ ] fix planet tessellation tests
  - [ ] use anisotropic mipmapping
  - [ ] integrate object shadows into direct light shader and maybe make template function for shadows which can be composed,
    - [ ] use multiplication of local shadow map and planet+cloud shadows?
  - [ ] improve performance of quaternions (see fastmath implementation)
  - [ ] extendability (modding)?
  - [ ] put parameters like max-height, power, specular, radius in a configuration (edn?) file
    - only render sun glare when sun is above horizon, use single (normalised?) color from transmittance, bloom?
    - amplify glare? appearance of sun? s2016-pbs-frostbite-sky-clouds-new.pdf page 28
  - [ ] separate atmosphere from environmental shadow code, setup-shadow-matrices support for no environmental shadow,
    - overall-shading with object shadows only, aggregate shadow-vars with scene-shadows?
  - [ ] documentation how to create glTF with Blender
    - [ ] normal map baking in blender: swizzle R=+X, G=-Y, B=+Z
    - [ ] apply all modifiers
    - [ ] bake animation when exporting (use NLP track names)
      - [ ] is "depth" initialised when rendering space ship or planet?
